<p align="center">
   <img src="https://github.com/user-attachments/assets/7d564981-cb81-43e7-819a-25ffcfc5bd72" width=40% height=40%/>
</p>

# HBnB Project â€” Business Logic & API Endpoints Implementation

## ğŸ“Œ Overview

This part of the **HBnB Project** focuses on the implementation phase of the application using **Python**, **Flask**, and **Flask-RESTx**. The goal is to bring the previously designed architecture to life by building the **Presentation Layer** (API) and the **Business Logic Layer** (core functionality).

You will create the necessary classes and API endpoints to manage users, places, reviews, and amenities. The architecture is modular and scalable, following industry best practices.

> ğŸ”’ Note: Authentication and access control will be implemented in Part 3.

---

## ğŸ—‚ï¸ Project Structure

```bash
hbnb/
â”œâ”€â”€ app/
â”‚ â”œâ”€â”€ api/ # API (Presentation Layer): Flask-RESTx namespaces and routing
â”‚ â”‚ â”œâ”€â”€ init.py
â”‚ â”‚ â”œâ”€â”€ users.py # API endpoints for User entity
â”‚ â”‚ â”œâ”€â”€ places.py # API endpoints for Place entity
â”‚ â”‚ â”œâ”€â”€ reviews.py # API endpoints for Review entity
â”‚ â”‚ â””â”€â”€ amenities.py # API endpoints for Amenity entity
â”‚ â”‚
â”‚ â”œâ”€â”€ models/ # Core business logic models
â”‚ â”‚ â”œâ”€â”€ init.py
â”‚ â”‚ â”œâ”€â”€ user.py
â”‚ â”‚ â”œâ”€â”€ place.py
â”‚ â”‚ â”œâ”€â”€ review.py
â”‚ â”‚ â””â”€â”€ amenity.py
â”‚ â”‚
â”‚ â”œâ”€â”€ persistence/ # In-memory repository for managing data
â”‚ â”‚ â”œâ”€â”€ init.py
â”‚ â”‚ â””â”€â”€ repository.py
â”‚ â”‚
â”‚ â”œâ”€â”€ services/ # Facade layer to connect API with business logic
â”‚ â”‚ â”œâ”€â”€ init.py
â”‚ â”‚ â””â”€â”€ hbnb_service.py
â”‚ â”‚
â”‚ â”œâ”€â”€ config.py # Environment-specific configuration
â”‚ â””â”€â”€ app.py # Application factory and API setup
â”‚
â”œâ”€â”€ run.py # Entry point to run the application
â”œâ”€â”€ requirements.txt # Python dependencies
â””â”€â”€ README.md # Project documentation
```

---

## âš™ï¸ Setup Instructions

### 1. Clone the Repository

```bash
git clone https://github.com/your-username/hbnb-api.git
cd hbnb-api
```

### 2. Create a Virtual Environment
```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. Install Dependencies
```bash
pip install -r requirements.txt
```

### 4. Run the Application
```bash
python run.py
```

### 5. Access the API Documentation
Once the app is running, visit http://localhost:5000/api/v1/ to access the Swagger UI automatically generated by Flask-RESTx.

---

## ğŸ” Access the API Documentation

Once the app is running, visit [http://localhost:5000/api/v1/](http://localhost:5000/api/v1/) to access the **Swagger UI** automatically generated by Flask-RESTx.

---

## ğŸ“˜ Features Implemented

### âœ… Presentation Layer (API)

- RESTful endpoints built with **Flask-RESTx**
- Organized **namespaces** for each resource
- Automatic **Swagger documentation**

### âœ… Business Logic Layer

- Object-oriented classes for `User`, `Place`, `Review`, and `Amenity`
- Entity **relationships** and **data validation**
- A **facade service layer** (`hbnb_service.py`) to mediate API logic

### âœ… Persistence Layer

- **In-memory data repository** (future integration with a real database is possible)
- Common operations: `add`, `get`, `update`, `delete`, `get_by_attribute`

---

## ğŸ“– Business Logic Layer â€” Entities & Responsibilities

This project implements a **Business Logic Layer (BLL)** that models the core entities of a booking application: **User**, **Place**, **Amenity**, and **Review**.  
Each entity inherits from `BaseModel`, which provides shared functionality including:  
âœ… A unique identifier (`id`)  
âœ… Creation and update timestamps (`created_at`, `updated_at`)  
âœ… Basic persistence methods (`save`, `update`)  

---

### ğŸ“¦ Entities and Responsibilities

Below is the ER diagram representing the core entities and their relationships in the HBnB system, created using Mermaid.js:

```mermaid
erDiagram
User {
    UUID4 id
    string first_name
    string last_name
    string email
    string password
    boolean is_admin
}
Place {
    UUID4 id
    string title
    string description
    float price
    float latitude
    float longitude
    UUID4 owner_id
}
Review {
    UUID4 id
    string text
    int rating
    UUID4 user_id
    UUID4 place_id
}
Amenity {
    UUID4 id
    string name
}
Place_Amenity {
    UUID4 place_id
    UUID4 amenity_id
}
User ||--o{ Place : owns
User ||--o{Review : writes
Place ||--o{Review : has
Place ||--o{Place_Amenity : includes
Amenity ||--o{Place_Amenity : is_linked
```

---

#### `BaseModel`

Common base class:

- Generates a unique `id` (`UUID`)
- Includes `created_at` and `updated_at` timestamps
- `save()` method: updates the `updated_at` timestamp  
- `update(data)` method: updates specified attributes and calls `save()`

---

#### `User`

Represents a user:

- `id`, `created_at`, `updated_at`
- `is_admin`: indicates admin rights
- `first_name`, `last_name`, `email`
- `places`: list of created places
- `reviews`: list of submitted reviews

**Responsibilities:**

- Create new places (`new_place`)
- Submit reviews (`new_review`)

---

#### `Place`

Represents a location offered by a user:

- `id`, `created_at`, `updated_at`
- `owner`: ID of the user who owns the place
- `title`, `description`
- `price`, `latitude`, `longitude`
- `amenitys`: list of linked amenities
- `reviews`: list of linked reviews

**Responsibilities:**

- Add amenities (`add_amenity`)
- Add reviews (`add_review`)

---

#### `Amenity`

Represents an amenity linked to a place:

- `id`, `created_at`, `updated_at`
- `place`: ID of the linked place
- `name`, `description`

---

#### `Review`

Represents a review for a place:

- `id`, `created_at`, `updated_at`
- `place`: ID of the reviewed place
- `user`: ID of the reviewer
- `rating`: score given
- `text`: review content

---

## ğŸ›  Example Usage

```python
from app.models.user import User
from app.models.place import Place
from app.models.amenity import Amenity
from app.models.review import Review

# Create a user
user = User(is_admin=False, first_name="Alice", last_name="Smith", email="alice@example.com")

# Create a place
place = Place(owner=user.id, title="Cozy Apartment", description="A nice apartment in the city center", price="100")

# Link the place to the user
user.new_place(place)

# Add an amenity to the place
wifi = Amenity(name="WiFi", description="High-speed wireless internet")
place.add_amenity(wifi)

# Submit a review
review = Review(place=place.id, user=user.id, rating="5", text="Great stay!")
user.new_review(review)
place.add_review(review)

# Update the place
place.update({"price": "120", "description": "Updated description"})

# Save changes
place.save()
user.save()
```

---

## ğŸŒŸ Notes

- Each entity is independent, but relationships are maintained through associated lists (`places`, `reviews`, `amenitys`).
- The model is designed to be extensible â€” new entities or features can be added easily.

---

## ğŸš€ Coming Next

- ğŸ” **JWT Authentication**
- ğŸ” **Role-based Access Control**
- ğŸ§ª **Automated Unit Testing**
- ğŸ—„ï¸ **Persistent Storage** (Database support)

---

## ğŸ§  Learning Outcomes

- Modular **Flask application** structure
- Building **RESTful APIs** with `flask-restx`
- Implementing **business logic** and entity relationships
- API documentation using **Swagger UI**
- **Testing** and **debugging** RESTful services
